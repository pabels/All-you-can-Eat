<polymer-element name="restaurant-model">
  <template>
  </template>


 <script>
      


		(function() {
			var base = '/restaurants/';
			
			function doAjax(options, success, error) {
				options.type = options.type || 'GET';
				options.url = base + (options.url || '');
				options.dataType = options.dataType || 'json';
				options.contentType = options.contentType || 'application/json; charset=UTF-8';
				options.success = success;
				options.error = (typeof error === 'function') ? error : 'error';

				$.ajax(options);
			}

			var restaurants;
			//var restaurantsFavorites;
			

			Polymer('restaurant-model', {
				created: function() {
					if (!restaurants) {
						doAjax({}, function(data) {
							 data.reverse();
                			restaurants= data;

                			/*restaurantsFavorites = data.map(function(key){
                				if(key.favoriteCard === 'true'){
                					
                					return key;
                				}
                			});*/

        					this.restaurants = restaurants; // sirve para q la var restaurants sea accesible desde fuera de restaurant model
    						//this.restaurantsFavorites = restaurantsFavorites;

						}.bind(this));
					}
				},

				newRestaurant: function(detail) {
					$.post(base ,detail).done(function(data){console.log(data.name + data.paragraph); alert('creado');}).fail(function(){console.log('eerr');})					
				},
				/*destroyScore: function(score) {
					doAjax({type: 'DELETE', url: '/' + score._id, dataType: 'text'}, function(data) {
						var i = this.scores.indexOf(score);
						if (i >= 0) {
							this.scores.splice(i, 1);
						}
					}.bind(this));
				},*/
				setRestaurant: function(restaurantFav) {
					var url =  restaurantFav._id;
					console.log(url+"soy url");
					

					var data = {

							name : restaurantFav.name,
					        paragraph : restaurantFav.paragraph,
					        type: restaurantFav.type,
					        direction: restaurantFav.direction,
					        menu:restaurantFav.menu,
					        favoriteCard:  "true"
						
					};
					doAjax({type: 'PUT', url: url, data: JSON.stringify(data)}, function() {
					}.bind(this));
				}
			});
		}());
    </script>


</polymer-element>