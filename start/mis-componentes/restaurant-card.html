
<polymer-element name="restaurant-card" attributes="restaurantObject"  on-restaurant-edited="{{openDialog}}"  >

  <template>
   <style>
    :host {
      display: block;
      position: relative;
      background-color: lightyellow;
      border-style: inherit;
      border-radius: 23px;
      border-color: black;
      border-width: 3px;
      margin-top: 10px;
      padding: 9px;
      width: 620px;
      font-family: 'Allura-Regular';
    }
    
    img{
      margin-left: 20px;
      border-radius: 11px;
      width: 150px;
      height: 150px;
      float: left;
    }
    h1{
     display: block;
      font-size: 36px;
      font-weight: bold;
      margin-top: 15px;
      font-family: Allura-Regular;
      margin-left: -162px;


    }   
      
    p{
      float: left;
      font-size: 25px;
      margin-bottom: 6px;

    }
    #muevete{
      width: 350px;
      margin-left: 35px;
      text-align: center;
    }
    #card{
      border-radius: 20%;
    }
    
    paper-toggle-button::shadow [checked] .toggle-ink {
     color: teal;
    }
   
    
   </style>
    <div class="card-header" layout horizontal center>
      <img src={{restaurantObject.image}} >
       <div id="muevete">
            <h1>{{restaurantObject.name}}</h1>
            <p>{{restaurantObject.paragraph}}</p>
            <paper-toggle-button on-change="{{fireOpen}}"></paper-toggle-button>
       </div>
    </div>

    <restaurant-controls restaurant="{{restaurantObject}}"  hidden?="{{!loggedon}}"></restaurant-controls>
     <dialog-update  id="dialog_update" restaurant="{{restaurantObject}}"></dialog-update>


   <core-collapse id="collapse1" class="" style="overflow: hidden; height: auto;">
     <create-comment restaurant="{{restaurantObject}}"></create-comment>
     <comments-list id="comentList" comments="{{restaurantObject.comments}}"></comments-list>
   </core-collapse>  
     



</template>
  <script>
  var profiler = {};
  Polymer({
     loggedon: true,
     
      
    created: function(){
        localStorage.token !== undefined ? this.loggedon = true : this.loggedon = false;
        doAjax({url : '/profile'}, function(data) {

          console.log(data+"**********************************************************");
          profiler = data;
          this.profiler = profiler; // sirve para q la var restaurants sea accesible desde fuera de restaurant model
        }.bind(this));
      
     },

     open : function (){
     this.$.collapse1.toggle();
     

     },

    ready : function(){
     
    },
    openDialog : function(){
      console.log ( 'lanzateeeeeeee');
      this.$.dialog_update.openningDialog();
    },

    fireOpen : function(){
   
      this.open();
    }
   
  });

  </script>
</polymer-element>
